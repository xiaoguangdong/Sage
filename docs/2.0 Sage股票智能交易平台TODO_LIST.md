# Sage股票智能交易平台 TODO LIST

> 本TODO基于**当前代码现状**与**聊天记录决策**整理，优先解决“可运行、可回测、可复现”。

## P0 代码健康与数据规范（立即）
- [ ] 统一股票代码字段（`ts_code`/`code`/`stock`）与日期字段（`trade_date`/`date`）
- [ ] 修复 `run_weekly.py` 与 `DataLoader.load_all_baostock_data()` 接口不匹配
- [ ] 修复 `features/price_features.py`、`features/market_features.py` 的语法/API问题
- [ ] 修复 `trend_model.py`（`ma_medium` 赋值）与 `trend_model_enhanced.py` 的逻辑问题
- [ ] 回测中移除随机收益占位，接入真实收益计算
- [ ] 数据源适配器：Tushare > NBS > Eastmoney > Akshare（Baostock仅备份/补充）
- [ ] 建立数据质量检查脚本与报告模板
- [ ] 统一日志规范：`logs/<module>/<YYYYMMDD>_<NNN>.log`
- [ ] 新增“防数据泄露检查”（标签列/未来信息过滤）

## P1 核心研究链路（短期）
- [ ] 宏观模型（MacroPredictor/IndustryClassifier/CycleDetector）与行业映射对齐
- [ ] 趋势状态模型（规则基线）落地 + 置信度/仓位建议
- [ ] 主线/行业轮动评分（mainline logic）对接信号融合
- [ ] 选股排序模型（LGBM）与买卖点过滤（LR/规则）整合
- [ ] 统一信号契约（Signal Schema）与策略编排入口
- [ ] 政策/产业/概念 LLM 模块设计与数据管道（细节后定，只做加权/过滤）

## P2 回测与评估（中期）
- [ ] Walk-forward/滚动回测一体化
- [ ] 交易成本/滑点/复权框架
- [ ] 评价指标：年化/回撤/IC/IR/胜率/换手率

## P3 监控与报告（中期）
- [ ] 数据缺失/异常监控
- [ ] 日报/周报模板
- [ ] 回测报告输出（markdown + csv）

## P4 重构与扩展（长期）
- [ ] 模块插件化（策略/模型可替换）
- [ ] 预留实盘接口（模拟盘优先）
- [ ] LLM/NLP模块接入（政策/产业/概念信号，输出结构化标签）

## Q&A
- Q: 是否保留/迁移 `ml_stock_forecast` 作为旧版基线？  
  A: 待确认。
- Q: 低频调仓目标是“周/双周/月”？  
  A: 待确认。
