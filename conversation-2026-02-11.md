# 会话记录 - 2026-02-11

## 概述
本次会话主要讨论和完成了以下内容：
1. 宏观经济预测模型设计
2. 项目总体架构设计
3. 概念板块数据获取和分析
4. 待办事项整理

## 主要讨论内容

### 1. 宏观经济预测模型设计
- 设计了基于NBS和Tushare数据的宏观经济预测模型
- 定义了四种场景：复苏、大涨、衰退、全行业衰退
- 添加了置信度评分机制
- 添加了黑天鹅预警机制
- 明确了宏观模型的定位：识别机会行业，为选股模型提供参考

### 2. 项目总体架构设计
- 设计了四层架构：数据层→处理层→模型层→应用层
- 定义了四个核心模型：宏观模型、趋势模型、选股模型、买卖模型
- 明确了各模型的职责和协作关系
- 宏观模型输出机会行业，与选股模型共振增加置信度

### 3. 概念板块数据
- 测试了多个数据源（adata、akshare、efinance、Tushare、东方财富）
- 确定使用Tushare concept接口获取概念数据（5100积分可用）
- 分析了2024-09-24到2024-12-31期间的概念表现
- 筛选成分股>=10的概念，提高了可靠性

### 4. 置信度评分机制
- 根据各指标偏离阈值程度计算置信度
- 每个行业判断都给出置信度评分（0-1）
- 高置信度>80%，中置信度60-80%，低置信度<60%

### 5. 黑天鹅预警机制
- 统计所有行业状态，计算全行业健康度
- 基于行业层面和宏观层面综合评分
- 生成预警信息（全行业衰退、通缩等）

### 6. 行业生命周期判断
- 讨论了行业生命周期的实现方法
- 确定去掉行业生命周期（数据获取难、时效性差、投入产出比低）
- 只用景气度评分和估值分位即可

### 7. 待办事项整理
- 趋势模型不够完美
- 选股模型概念数据获取受限制
- 买卖点模型没有实现建模和测试
- 国家统计局数据的整理和清洗

## 创建的文件

### 文档文件
1. docs/宏观经济预测模型设计文档.md
2. docs/项目总体架构设计设想.md
3. docs/todo_list.md

### 脚本文件
1. ml_stock_forecast/scripts/update_concept_data.py
2. ml_stock_forecast/scripts/update_concept_data_eastmoney.py
3. ml_stock_forecast/scripts/mainline_logic_system_optimized.py
4. ml_stock_forecast/scripts/fetch_tushare_sectors.py
5. 多个分析脚本

### 数据文件
1. data/tushare/sectors/all_concept_details.csv
2. data/tushare/sectors/sw_daily_all.parquet
3. data/tushare/sectors/concept_score_ranking.csv

## 关键决策

1. **宏观模型定位**：只识别机会行业，不输出买卖信号和个股推荐
2. **共振机制**：宏观模型输出与选股模型初步筛选结果共振，增加置信度
3. **去掉行业生命周期**：数据获取难、时效性差、投入产出比低
4. **置信度评分**：根据指标偏离阈值程度计算，给出每个行业判断的置信度
5. **黑天鹅预警**：统计全行业状态，生成系统性风险预警

## 下一步计划

1. 等待IP限制解除后，使用Tushare接口获取完整概念数据
2. 实现置信度评分机制
3. 实现黑天鹅预警机制
4. 开始获取国家统计局数据，为宏观模型提供数据支持