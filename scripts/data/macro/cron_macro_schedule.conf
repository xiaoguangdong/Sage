# 宏观数据更新定时任务配置
# 使用方法: crontab -e
# 或者: crontab cron_macro_schedule.conf

# 环境变量
SHELL=/bin/bash
PATH=/usr/local/bin:/usr/bin:/bin
HOME=/Users/dongxg/SourceCode/Sage

# 每月1日凌晨2点：更新国家统计局数据（PMI等）
0 2 1 * * cd $HOME && python3 scripts/data/macro/fetch_nbs_data.py >> logs/macro/fetch_nbs.log 2>&1

# 每月10日凌晨2点：更新Tushare月度数据（CPI、PPI等）
0 2 10 * * cd $HOME && python3 scripts/data/tushare_downloader.py --task cn_cpi --start-date 202001 --end-date $(date +%Y%m) --resume >> logs/macro/fetch_tushare.log 2>&1
0 2 10 * * cd $HOME && python3 scripts/data/tushare_downloader.py --task cn_ppi --start-date 202001 --end-date $(date +%Y%m) --resume >> logs/macro/fetch_tushare.log 2>&1
0 2 10 * * cd $HOME && python3 scripts/data/tushare_downloader.py --task cn_pmi --start-date 202001 --end-date $(date +%Y%m) --resume >> logs/macro/fetch_tushare.log 2>&1

# 每月16日凌晨2点：更新国家统计局行业数据（固定资产投资、分行业PPI等）
0 2 16 * * cd $HOME && python3 scripts/data/macro/fetch_nbs_data.py >> logs/macro/fetch_nbs.log 2>&1

# 每周五凌晨2点：更新北向资金持仓数据
0 2 * * 5 cd $HOME && python3 scripts/data/tushare_downloader.py --task northbound_hold --start-date 20200101 --end-date $(date +%Y%m%d) --resume >> logs/macro/fetch_northbound.log 2>&1

# 每日凌晨2点：更新日度数据（10Y收益率、北向资金流向）
15 2 * * * cd $HOME && python3 scripts/data/tushare_downloader.py --task yield_10y --resume >> logs/macro/fetch_tushare.log 2>&1
15 2 * * * cd $HOME && python3 scripts/data/tushare_downloader.py --task northbound_flow --start-date 20200101 --end-date $(date +%Y%m%d) --resume >> logs/macro/fetch_tushare.log 2>&1

# 每月1号上午9点：检查数据更新情况
0 9 1 * * cd $HOME && bash scripts/data/macro/check_macro_data.sh >> logs/macro/check.log 2>&1

# 创建日志目录
0 1 * * * mkdir -p logs/macro
