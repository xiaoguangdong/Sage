tasks:
  ths_index:
    api: ths_index
    mode: single
    output: "tushare/concepts/ths_index.parquet"

  ths_daily:
    api: ths_daily
    mode: date_range
    start_field: start_date
    end_field: end_date
    split: month
    pagination: offset
    limit: 3000
    dedup_keys: ["ts_code", "trade_date"]
    state: "data/states/ths_daily.json"
    output: "tushare/concepts/ths_daily.parquet"

  dc_index:
    api: dc_index
    mode: date_range
    start_field: start_date
    end_field: end_date
    split: month
    pagination: offset
    limit: 5000
    dedup_keys: ["ts_code", "trade_date"]
    state: "data/states/dc_index.json"
    output: "tushare/concepts/dc_index.parquet"

  daily_basic:
    api: daily_basic
    mode: date_range
    start_field: start_date
    end_field: end_date
    split: month
    pagination: offset
    limit: 6000
    dedup_keys: ["ts_code", "trade_date"]
    state: "data/states/daily_basic.json"
    output: "tushare/daily_basic.parquet"

  margin:
    api: margin
    mode: date_range
    start_field: start_date
    end_field: end_date
    split: month
    pagination: offset
    limit: 4000
    dedup_keys: ["trade_date", "exchange_id"]
    state: "data/states/margin.json"
    output: "tushare/margin.parquet"

  daily_kline:
    api: daily
    mode: date_range
    start_field: start_date
    end_field: end_date
    split: day
    dedup_keys: ["ts_code", "trade_date"]
    state: "data/states/daily_kline.json"
    output: "tushare/daily.parquet"

  index_ohlc:
    api: daily
    mode: list
    list_items: ["000300.SH", "000905.SH"]
    list_param: ts_code
    start_field: start_date
    end_field: end_date
    split: month
    dedup_keys: ["ts_code", "trade_date"]
    state: "data/states/index_ohlc.json"
    output: "tushare/index/index_ohlc.parquet"

  hs300_constituents:
    api: index_weight
    mode: date_range
    start_field: start_date
    end_field: end_date
    split: year
    params:
      index_code: "000300.SH"
    dedup_keys: ["con_code", "trade_date"]
    state: "data/states/hs300_constituents.json"
    output: "tushare/constituents/hs300_constituents_all.parquet"

  hs300_moneyflow:
    api: moneyflow
    mode: list
    list_file: "data/raw/tushare/constituents/hs300_constituents_all.parquet"
    list_column: "con_code"
    list_param: ts_code
    start_field: start_date
    end_field: end_date
    split: month
    dedup_keys: ["ts_code", "trade_date"]
    state: "data/states/hs300_moneyflow.json"
    output: "tushare/moneyflow/moneyflow_all.parquet"

  sw_industry_classify:
    api: index_classify
    mode: single
    params:
      level: "L1"
      src: "SW2021"
    output: "tushare/sw_industry/sw_industry_l1.parquet"

  sw_industry_daily:
    api: daily
    mode: list
    list_file: "data/raw/tushare/sw_industry/sw_industry_l1.parquet"
    list_column: "index_code"
    list_param: ts_code
    start_field: start_date
    end_field: end_date
    split: month
    dedup_keys: ["ts_code", "trade_date"]
    state: "data/states/sw_industry_daily.json"
    output: "tushare/sw_industry/sw_industry_daily.parquet"

  sw_index_member:
    api: index_member
    mode: list
    list_file: "data/raw/tushare/sw_industry/sw_industry_l1.parquet"
    list_column: "index_code"
    list_param: index_code
    dedup_keys: ["index_code", "con_code"]
    state: "data/states/sw_index_member.json"
    output: "tushare/sw_industry/sw_index_member.parquet"

  opt_daily:
    api: opt_daily
    mode: list
    list_items: ["SSE", "SZSE"]
    list_param: exchange
    start_field: trade_date
    end_field: trade_date
    split: day
    params:
      calender: "natural"
    dedup_keys: ["ts_code", "trade_date", "exchange"]
    state: "data/states/opt_daily.json"
    output: "tushare/options/opt_daily.parquet"

  fina_indicator:
    api: fina_indicator
    mode: list
    list_file: "data/raw/tushare/filtered_stocks_list.csv"
    list_columns: ["tushare", "ts_code"]
    list_param: ts_code
    start_field: start_date
    end_field: end_date
    split: year
    state: "data/states/fina_indicator.json"
    output: "tushare/fina_indicator/fina_indicator_all.parquet"

  fina_indicator_vip:
    api: fina_indicator_vip
    mode: year_quarters
    list_param: period
    start_year: 2020
    end_year: 2025
    quarters: ["0331", "0630", "0930", "1231"]
    state: "data/states/fina_indicator_vip.json"
    output: "tushare/fina_indicator_vip/fina_indicator_vip_all.parquet"

  tushare_concept_list:
    api: concept
    mode: single
    output: "tushare/sectors/concepts.parquet"

  tushare_concept_detail:
    api: concept_detail
    mode: list
    list_file: "data/raw/tushare/sectors/concepts.parquet"
    list_column: "code"
    list_param: id
    output: "tushare/sectors/concept_detail.parquet"

  northbound_flow:
    api: moneyflow_hsgt
    mode: date_range
    start_field: start_date
    end_field: end_date
    split: month
    dedup_keys: ["trade_date"]
    state: "data/states/northbound_flow.json"
    output: "tushare/northbound/northbound_flow.parquet"

  northbound_hold:
    api: hk_hold
    mode: date_range
    start_field: start_date
    end_field: end_date
    split: month
    dedup_keys: ["ts_code", "trade_date"]
    state: "data/states/northbound_hold.json"
    output: "tushare/northbound/northbound_hold.parquet"

  northbound_top10:
    api: hsgt_top10
    mode: date_range
    start_field: start_date
    end_field: end_date
    split: month
    pagination: offset
    limit: 5000
    dedup_keys: ["trade_date", "ts_code"]
    state: "data/states/northbound_top10.json"
    output: "tushare/northbound/northbound_top10.parquet"

  yield_10y:
    api: yc_cb
    mode: single
    pagination: offset
    limit: 2000
    params:
      curve_term: 10
    dedup_keys: ["trade_date", "curve_term"]
    state: "data/states/yield_10y.json"
    output: "tushare/macro/yield_10y.parquet"

  yield_2y:
    api: yc_cb
    mode: single
    pagination: offset
    limit: 2000
    params:
      curve_term: 2
    dedup_keys: ["trade_date", "curve_term"]
    state: "data/states/yield_2y.json"
    output: "tushare/macro/yield_2y.parquet"

  cn_cpi:
    api: cn_cpi
    mode: date_range
    date_format: "%Y%m"
    start_field: start_m
    end_field: end_m
    split: month
    dedup_keys: ["month"]
    state: "data/states/cn_cpi.json"
    output: "tushare/macro/tushare_cpi.parquet"

  cn_ppi:
    api: cn_ppi
    mode: date_range
    date_format: "%Y%m"
    start_field: start_m
    end_field: end_m
    split: month
    dedup_keys: ["month"]
    state: "data/states/cn_ppi.json"
    output: "tushare/macro/tushare_ppi.parquet"

  cn_pmi:
    api: cn_pmi
    mode: date_range
    date_format: "%Y%m"
    start_field: start_m
    end_field: end_m
    split: month
    dedup_keys: ["month"]
    state: "data/states/cn_pmi.json"
    output: "tushare/macro/tushare_pmi.parquet"

  sw_valuation:
    api: sw_daily
    mode: date_range
    start_field: start_date
    end_field: end_date
    split: month
    pagination: offset
    limit: 3000
    dedup_keys: ["trade_date", "index_code"]
    state: "data/states/sw_valuation.json"
    output: "tushare/macro/sw_valuation.parquet"

  fina_mainbz_vip:
    api: fina_mainbz_vip
    mode: year_quarters
    list_param: period
    start_year: 2020
    end_year: 2026
    quarters: ["0331", "0630", "0930", "1231"]
    pagination: offset
    limit: 8000
    state: "data/states/fina_mainbz_vip.json"
    output: "tushare/macro/segments/fina_mainbz_vip.parquet"

  tushare_anns:
    api: anns_d
    mode: date_range
    start_field: start_date
    end_field: end_date
    split: month
    pagination: offset
    limit: 2000
    dedup_keys: ["ann_date", "ts_code", "title", "url"]
    state: "data/states/tushare_anns.json"
    output: "tushare/policy/tushare_anns.parquet"

  tushare_reports:
    api: research_report
    mode: date_range
    start_field: start_date
    end_field: end_date
    split: month
    pagination: offset
    limit: 1000
    dedup_keys: ["trade_date", "title", "ts_code", "inst_csname"]
    state: "data/states/tushare_reports.json"
    output: "tushare/policy/tushare_reports.parquet"

  ak_concept_list:
    provider: akshare
    api: stock_board_concept_name_em
    mode: single
    output: "akshare/concepts/concept_list.parquet"

  ak_concept_components:
    provider: akshare
    api: stock_board_concept_cons_em
    mode: single
    state: "data/states/akshare_concept_components.json"
    output: "akshare/concepts/components/placeholder.parquet"
    params:
      concept_list_path: "akshare/concepts/concept_list.parquet"

  ak_stock_hist:
    provider: akshare
    api: stock_zh_a_hist
    mode: list
    list_file: "data/raw/tushare/filtered_stocks_list.csv"
    state: "data/states/akshare_stock_hist.json"
    output: "akshare/stock_hist/placeholder.parquet"
    params:
      adjust: "qfq"
